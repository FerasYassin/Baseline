<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>Baseline</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { 
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }
        body { 
            margin: 0; 
            padding: 0; 
            overflow: hidden;
            background: #000;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        #root { 
            height: 100vh; 
            overflow: hidden;
        }
        
        @keyframes slideInFromRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes slideInFromLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .calendar-enter { animation: slideInFromRight 0.5s ease-out; }
        .tasks-enter-left { animation: slideInFromLeft 0.5s ease-out; }
        .tasks-enter-right { animation: slideInFromRight 0.5s ease-out; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        const CalendarIcon = () => (
            React.createElement('svg', { width: 24, height: 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2 },
                React.createElement('rect', { x: 3, y: 4, width: 18, height: 18, rx: 2, ry: 2 }),
                React.createElement('line', { x1: 16, y1: 2, x2: 16, y2: 6 }),
                React.createElement('line', { x1: 8, y1: 2, x2: 8, y2: 6 }),
                React.createElement('line', { x1: 3, y1: 10, x2: 21, y2: 10 })
            )
        );
        
        const CheckSquareIcon = () => (
            React.createElement('svg', { width: 24, height: 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, className: "text-green-600 flex-shrink-0" },
                React.createElement('polyline', { points: "9 11 12 14 22 4" }),
                React.createElement('path', { d: "M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" })
            )
        );
        
        const SquareIcon = () => (
            React.createElement('svg', { width: 24, height: 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, className: "text-gray-600 flex-shrink-0" },
                React.createElement('rect', { x: 3, y: 3, width: 18, height: 18, rx: 2, ry: 2 })
            )
        );
        
        const PlusIcon = () => (
            React.createElement('svg', { width: 24, height: 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2 },
                React.createElement('line', { x1: 12, y1: 5, x2: 12, y2: 19 }),
                React.createElement('line', { x1: 5, y1: 12, x2: 19, y2: 12 })
            )
        );
        
        const XIcon = () => (
            React.createElement('svg', { width: 24, height: 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2 },
                React.createElement('line', { x1: 18, y1: 6, x2: 6, y2: 18 }),
                React.createElement('line', { x1: 6, y1: 6, x2: 18, y2: 18 })
            )
        );

        const DisciplineApp = () => {
            const [activeTab, setActiveTab] = useState('daily');
            const [previousTab, setPreviousTab] = useState('daily');
            const [showAddTask, setShowAddTask] = useState(false);
            const [newTaskText, setNewTaskText] = useState('');
            const [selectedTimeframe, setSelectedTimeframe] = useState('daily');
            const [calendarView, setCalendarView] = useState(false);
            const [animationKey, setAnimationKey] = useState(0);
            
            const loadTasks = () => {
                try {
                    const saved = localStorage.getItem('disciplineTasks');
                    if (saved) return JSON.parse(saved);
                } catch (e) {
                    console.error('Error loading tasks:', e);
                }
                return {
                    daily: [
                        { id: 1, text: 'Make bed', completed: false },
                        { id: 2, text: 'Workout', completed: false },
                        { id: 3, text: 'Read 20 pages', completed: false },
                        { id: 4, text: 'No social media before noon', completed: false },
                        { id: 5, text: 'Eat clean', completed: false },
                    ],
                    weekly: [
                        { id: 1, text: 'Gym 4x', completed: false },
                        { id: 2, text: 'Finish book', completed: false },
                        { id: 3, text: 'Meal prep Sunday', completed: false },
                        { id: 4, text: 'No alcohol', completed: false },
                    ],
                    monthly: [
                        { id: 1, text: 'Revenue goal: $10k', completed: false },
                        { id: 2, text: 'Read 2 books', completed: false },
                        { id: 3, text: 'Launch product feature', completed: false },
                    ],
                    yearly: [
                        { id: 1, text: 'Build 6-figure business', completed: false },
                        { id: 2, text: 'Read 24 books', completed: false },
                        { id: 3, text: 'Get in best shape', completed: false },
                    ],
                };
            };

            const loadDailyHistory = () => {
                try {
                    const saved = localStorage.getItem('dailyHistory');
                    if (saved) return JSON.parse(saved);
                } catch (e) {
                    console.error('Error loading history:', e);
                }
                return {};
            };

            const [tasks, setTasks] = useState(loadTasks());
            const [dailyHistory, setDailyHistory] = useState(loadDailyHistory());
            const [streakDays] = useState(7);

            useEffect(() => {
                try {
                    localStorage.setItem('disciplineTasks', JSON.stringify(tasks));
                } catch (e) {
                    console.error('Error saving tasks:', e);
                }
            }, [tasks]);

            useEffect(() => {
                try {
                    localStorage.setItem('dailyHistory', JSON.stringify(dailyHistory));
                } catch (e) {
                    console.error('Error saving history:', e);
                }
            }, [dailyHistory]);

            const phrases = {
                failing: [
                    "This isn't discipline. Do better.",
                    "Below standard. Push harder.",
                    "You're capable of more than this.",
                    "Not acceptable. Get to work.",
                    "This is drift, not discipline.",
                    "Your future self deserves better.",
                    "Stop making excuses. Start doing.",
                    "You know what needs to happen.",
                    "Mediocrity is a choice. Choose better.",
                    "The day isn't over. Fix this.",
                    "This isn't who you want to be.",
                    "Discipline isn't negotiable.",
                    "You've done better before. Do it again.",
                    "No one else will do this for you.",
                    "Average is not your standard.",
                    "You're leaving progress on the table.",
                    "This is the easy path. Choose the hard one.",
                    "Comfort is killing your potential.",
                    "You already know what to do.",
                    "Stop waiting. Start executing.",
                    "This isn't effort. This is coasting.",
                    "Your goals require more than this.",
                    "Discipline separates you from everyone else.",
                    "You can turn this around right now.",
                    "The difference is in the execution.",
                    "Stop thinking. Start doing.",
                    "This is where growth happens. Push through.",
                    "You didn't come this far to stay here.",
                    "Winners show up on hard days too.",
                    "The scoreboard doesn't lie.",
                ],
                bareMinimum: [
                    "Bare minimum met. You can do better.",
                    "50%. Acceptable, not exceptional.",
                    "You passed. Now aim higher.",
                    "Average completed. Push for excellence.",
                    "Meeting the standard isn't beating it.",
                    "Good enough isn't good enough.",
                    "You cleared the bar. Now raise it.",
                    "Solid baseline. Now exceed it.",
                    "This is the floor, not the ceiling.",
                    "Passing is not the goal. Excellence is.",
                    "You're in the middle. Don't stay there.",
                    "Mediocre effort yields mediocre results.",
                    "This works. But you're capable of more.",
                    "You did the minimum. Do the maximum.",
                    "Progress made. More progress available.",
                    "You're on track. Now get ahead.",
                    "Standard met. Now set a new one.",
                    "This is fine. Fine isn't great.",
                    "You showed up. Now show out.",
                    "Halfway there isn't the destination.",
                    "Consistent beats perfect. But push harder.",
                    "You're doing it. Now dominate it.",
                    "Good start. Better finish needed.",
                    "This is progress. Don't settle here.",
                    "You're moving forward. Accelerate.",
                    "Meeting expectations. Exceed them.",
                    "Adequate is not ambitious.",
                    "This is survival. Aim for thriving.",
                    "You're coasting. Time to climb.",
                    "Minimum viable. Now make it exceptional.",
                ],
                strong: [
                    "Solid work. Keep going.",
                    "Strong effort. Don't let up.",
                    "You're executing. Stay consistent.",
                    "This is what discipline looks like.",
                    "Above standard. Maintain this.",
                    "You're putting in the work. It shows.",
                    "Impressive. Don't get comfortable.",
                    "You're building momentum. Use it.",
                    "This is the standard. Keep it there.",
                    "Quality execution. Now finish strong.",
                    "You showed up and delivered.",
                    "This is what winning looks like.",
                    "You're ahead of most. Stay there.",
                    "Strong discipline on display.",
                    "You're doing what others won't.",
                    "This is how you build excellence.",
                    "Consistent execution. Keep this energy.",
                    "You're separating yourself. Don't stop.",
                    "This is your standard now. Own it.",
                    "You made it happen. Again tomorrow.",
                    "High performance. This is the way.",
                    "You're in control. Stay locked in.",
                    "This is focus in action.",
                    "You delivered today. Repeat it.",
                    "Exceptional effort. Maintain the pace.",
                    "You're proving yourself right.",
                    "This is discipline, not luck.",
                    "You earned this. Keep earning it.",
                    "You're setting the standard.",
                    "Strong finish. Build on it tomorrow.",
                ],
                perfect: [
                    "100%. Excellence achieved.",
                    "Flawless execution. Don't get comfortable.",
                    "Perfect. Now do it again tomorrow.",
                    "Complete domination. This is your baseline.",
                    "You owned today. Make it a habit.",
                    "Every single task. That's discipline.",
                    "100%. This is who you are now.",
                    "Perfect score. Repeat it.",
                    "Zero excuses. Zero failures. All execution.",
                    "You did everything. That's the standard.",
                    "Complete. Now raise the bar tomorrow.",
                    "Full discipline. Don't lose this edge.",
                    "You swept the board. Again.",
                    "This is what winning every day looks like.",
                    "Perfect execution. Make it your norm.",
                ],
            };

            const getMessage = (percentage) => {
                let phraseArray;
                if (percentage === 100) phraseArray = phrases.perfect;
                else if (percentage >= 75) phraseArray = phrases.strong;
                else if (percentage >= 50) phraseArray = phrases.bareMinimum;
                else phraseArray = phrases.failing;
                
                const index = percentage % phraseArray.length;
                return phraseArray[index];
            };

            const calculatePercentage = (taskList) => {
                if (taskList.length === 0) return 0;
                const completed = taskList.filter(t => t.completed).length;
                return Math.round((completed / taskList.length) * 100);
            };

            const generateCalendarData = () => {
                const data = [];
                const today = new Date();
                const todayKey = today.toISOString().split('T')[0];
                
                for (let i = 29; i >= 0; i--) {
                    const date = new Date(today);
                    date.setDate(date.getDate() - i);
                    const dateKey = date.toISOString().split('T')[0];
                    
                    let percentage;
                    let color;
                    
                    if (dateKey === todayKey) {
                        percentage = calculatePercentage(tasks.daily);
                        color = 'grey';
                    } else if (dailyHistory[dateKey] !== undefined) {
                        percentage = dailyHistory[dateKey];
                        color = percentage >= 75 ? 'green' : percentage >= 50 ? 'yellow' : 'red';
                    } else {
                        percentage = Math.floor(Math.random() * 100);
                        color = percentage >= 75 ? 'green' : percentage >= 50 ? 'yellow' : 'red';
                    }
                    
                    data.push({
                        date: dateKey,
                        day: date.getDate(),
                        percentage,
                        color
                    });
                }
                return data;
            };

            const [calendarData, setCalendarData] = useState(generateCalendarData());

            useEffect(() => {
                setCalendarData(generateCalendarData());
            }, [tasks.daily, dailyHistory]);

            const getColor = (percentage) => {
                if (percentage >= 75) return '#10b981';
                if (percentage >= 50) return '#f59e0b';
                return '#ef4444';
            };

            const getTabIndex = (tab) => {
                const tabs = ['daily', 'weekly', 'monthly', 'yearly'];
                return tabs.indexOf(tab);
            };

            const handleTabChange = (newTab) => {
                setPreviousTab(activeTab);
                setActiveTab(newTab);
                setAnimationKey(prev => prev + 1);
            };

            const getAnimationClass = () => {
                const prevIndex = getTabIndex(previousTab);
                const currIndex = getTabIndex(activeTab);
                return currIndex > prevIndex ? 'tasks-enter-right' : 'tasks-enter-left';
            };

            const toggleTask = (timeframe, taskId) => {
                setTasks(prev => ({
                    ...prev,
                    [timeframe]: prev[timeframe].map(task =>
                        task.id === taskId ? { ...task, completed: !task.completed } : task
                    )
                }));
            };

            const addTask = () => {
                if (!newTaskText.trim()) return;
                const newTask = {
                    id: Date.now(),
                    text: newTaskText,
                    completed: false
                };
                setTasks(prev => ({
                    ...prev,
                    [selectedTimeframe]: [...prev[selectedTimeframe], newTask]
                }));
                setNewTaskText('');
                setShowAddTask(false);
            };

            const deleteTask = (timeframe, taskId) => {
                setTasks(prev => ({
                    ...prev,
                    [timeframe]: prev[timeframe].filter(task => task.id !== taskId)
                }));
            };

            const currentTasks = tasks[activeTab] || [];
            const percentage = calculatePercentage(currentTasks);
            const color = getColor(percentage);
            const message = getMessage(percentage);

            if (calendarView) {
                return React.createElement('div', { className: 'h-screen bg-black flex flex-col calendar-enter' },
                    React.createElement('div', { className: 'bg-zinc-900 border-b border-zinc-800 px-6 py-4' },
                        React.createElement('div', { className: 'flex items-center justify-between' },
                            React.createElement('button', { 
                                onClick: () => setCalendarView(false), 
                                className: 'text-gray-400' 
                            }, 'â† Back'),
                            React.createElement('h1', { className: 'text-lg font-semibold text-white' }, 'History'),
                            React.createElement('div', { className: 'w-16' })
                        )
                    ),
                    React.createElement('div', { className: 'bg-zinc-900 border-b border-zinc-800 px-6 py-4' },
                        React.createElement('div', { className: 'flex items-center justify-between' },
                            React.createElement('div', null,
                                React.createElement('div', { className: 'text-sm text-gray-500' }, 'Green Day Streak'),
                                React.createElement('div', { className: 'text-2xl font-bold text-white' }, streakDays + ' days')
                            ),
                            React.createElement('div', { className: 'text-4xl' }, 'ðŸ”¥')
                        )
                    ),
                    React.createElement('div', { className: 'flex-1 overflow-auto p-6' },
                        React.createElement('div', { className: 'grid grid-cols-7 gap-2' },
                            ['S', 'M', 'T', 'W', 'T', 'F', 'S'].map(day =>
                                React.createElement('div', { 
                                    key: day, 
                                    className: 'text-center text-xs font-semibold text-gray-500 pb-2' 
                                }, day)
                            ),
                            calendarData.map((day, idx) =>
                                React.createElement('div', {
                                    key: idx,
                                    className: 'aspect-square rounded-lg flex flex-col items-center justify-center',
                                    style: {
                                        backgroundColor: day.color === 'grey' ? '#52525b' :
                                                       day.color === 'green' ? '#10b981' : 
                                                       day.color === 'yellow' ? '#f59e0b' : '#ef4444'
                                    }
                                },
                                    React.createElement('div', { className: 'text-white text-sm font-semibold' }, day.day),
                                    React.createElement('div', { className: 'text-white text-xs' }, day.percentage + '%')
                                )
                            )
                        )
                    )
                );
            }

            if (showAddTask) {
                return React.createElement('div', { className: 'h-screen bg-black flex flex-col' },
                    React.createElement('div', { className: 'bg-zinc-900 border-b border-zinc-800 px-6 py-4' },
                        React.createElement('div', { className: 'flex items-center justify-between' },
                            React.createElement('button', { 
                                onClick: () => setShowAddTask(false), 
                                className: 'text-gray-400' 
                            }, 'Cancel'),
                            React.createElement('h1', { className: 'text-lg font-semibold text-white' }, 'Add Task'),
                            React.createElement('button', { 
                                onClick: addTask, 
                                className: 'text-green-500 font-semibold' 
                            }, 'Done')
                        )
                    ),
                    React.createElement('div', { className: 'p-6' },
                        React.createElement('div', { className: 'mb-4' },
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-400 mb-2' }, 'Timeframe'),
                            React.createElement('select', {
                                value: selectedTimeframe,
                                onChange: (e) => setSelectedTimeframe(e.target.value),
                                className: 'w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white'
                            },
                                React.createElement('option', { value: 'daily' }, 'Daily'),
                                React.createElement('option', { value: 'weekly' }, 'Weekly'),
                                React.createElement('option', { value: 'monthly' }, 'Monthly'),
                                React.createElement('option', { value: 'yearly' }, 'Yearly')
                            )
                        ),
                        React.createElement('div', null,
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-400 mb-2' }, 'Task'),
                            React.createElement('input', {
                                type: 'text',
                                value: newTaskText,
                                onChange: (e) => setNewTaskText(e.target.value),
                                placeholder: 'e.g., Workout, Read 20 pages',
                                className: 'w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-lg text-white placeholder-gray-600',
                                autoFocus: true
                            })
                        )
                    )
                );
            }

            return React.createElement('div', { className: 'h-screen bg-black flex flex-col' },
                React.createElement('div', { className: 'bg-zinc-900 border-b border-zinc-800 px-6 py-4' },
                    React.createElement('div', { className: 'flex items-center justify-between' },
                        React.createElement('h1', { className: 'text-2xl font-bold text-white' }, 'Baseline'),
                        React.createElement('button', { onClick: () => setCalendarView(true), className: 'text-gray-400' },
                            React.createElement(CalendarIcon)
                        )
                    )
                ),
                React.createElement('div', { className: 'bg-zinc-900 border-b border-zinc-800 px-6 py-6' },
                    React.createElement('div', { className: 'text-center' },
                        React.createElement('div', { 
                            className: 'text-6xl font-bold mb-2', 
                            style: { color: color } 
                        }, percentage + '%'),
                        React.createElement('div', { className: 'text-sm text-gray-500' },
                            currentTasks.filter(t => t.completed).length + '/' + currentTasks.length + ' tasks'
                        ),
                        React.createElement('div', { className: 'text-sm text-gray-400 mt-2' }, message)
                    )
                ),
                React.createElement('div', { className: 'bg-zinc-900 border-b border-zinc-800 px-6 py-2' },
                    React.createElement('div', { className: 'flex gap-4' },
                        ['daily', 'weekly', 'monthly', 'yearly'].map(tab =>
                            React.createElement('button', {
                                key: tab,
                                onClick: () => handleTabChange(tab),
                                className: 'px-4 py-2 text-sm font-medium capitalize ' + (
                                    activeTab === tab
                                        ? 'text-white border-b-2 border-white'
                                        : 'text-gray-500'
                                )
                            }, tab)
                        )
                    )
                ),
                React.createElement('div', { 
                    className: 'flex-1 overflow-auto',
                    style: { position: 'relative' }
                },
                    React.createElement('div', { 
                        key: animationKey,
                        className: 'p-6 space-y-3 ' + getAnimationClass()
                    },
                        currentTasks.map(task =>
                            React.createElement('div', {
                                key: task.id,
                                className: 'bg-zinc-900 rounded-lg p-4 flex items-center justify-between border border-zinc-800'
                            },
                                React.createElement('button', {
                                    onClick: () => toggleTask(activeTab, task.id),
                                    className: 'flex items-center gap-3 flex-1'
                                },
                                    task.completed ? 
                                        React.createElement(CheckSquareIcon) : 
                                        React.createElement(SquareIcon),
                                    React.createElement('span', {
                                        className: 'text-left ' + (task.completed ? 'text-gray-600 line-through' : 'text-white')
                                    }, task.text)
                                ),
                                React.createElement('button', {
                                    onClick: () => deleteTask(activeTab, task.id),
                                    className: 'ml-2 text-gray-600 hover:text-red-500'
                                }, React.createElement(XIcon))
                            )
                        )
                    )
                ),
                React.createElement('div', { className: 'p-6 bg-zinc-900 border-t border-zinc-800' },
                    React.createElement('button', {
                        onClick: () => setShowAddTask(true),
                        className: 'w-full bg-white text-black py-4 rounded-lg font-semibold flex items-center justify-center gap-2'
                    },
                        React.createElement(PlusIcon),
                        'Add Task'
                    )
                )
            );
        };

        ReactDOM.render(React.createElement(DisciplineApp), document.getElementById('root'));
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</body>
</html>
